{% extends "base.html" %}

{% block title %}Find Friend{% endblock %}

{% block content %}
<section id="find-friend" class="min-h-screen flex flex-col justify-center gap-10 items-center pt-20 px-8">
    <h2 class="text-2xl font-bold mb-6">Find Friend by Email</h2>
    
    <form method="POST" action="{{ url_for('main.find_friends') }}" class="flex gap-4">
        {{ form.hidden_tag() }}  <!-- CSRF token -->
        <input type="email" name="email" placeholder="Enter email" required class="p-2 border rounded-lg">
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg">Search</button>
    </form>

    {% if is_found %}
    <div class="mt-8">
        <h3 class="text-xl font-semibold">Friend Found:</h3>
        <div class="flex items-center gap-4 mt-4">
            <p>{{ friend.first_name }} {{ friend.last_name }}</p>
            <p class="text-sm text-gray-500">{{ friend.email }}</p>
        </div>

        <form action="{{ url_for('main.send_request', user_id=friend.id) }}" method="POST">
            {{ form.hidden_tag() }}  <!-- CSRF token -->
            
            {% if is_already_friends %}
                <button type="button" class="bg-gray-400 text-white px-4 py-2 mt-4 rounded-lg cursor-not-allowed" disabled>Already Friends</button>
            {% else %}
                <button type="submit" class="bg-green-500 text-white px-4 py-2 mt-4 rounded-lg">Send Friend Request</button>
            {% endif %}
        </form>
    </div>
    {% elif is_found is not none %}
    <p class="text-red-500 mt-8">No user found with that email.</p>
    {% endif %}
</section>
{% endblock %}

